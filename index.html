<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campaign Setup - Page 1</title>
    <style>
        :root {
            --primary: #4F46E5; /* Indigo */
            --primary-hover: #4338ca;
            --bg-color: #F3F4F6;
            --card-bg: #ffffff;
            --text-dark: #1F2937;
            --text-light: #6B7280;
            --border: #E5E7EB;
        }

        * {
            box-sizing: border-box;
            font-family: 'Inter', 'Segoe UI', sans-serif;
        }

        body {
            background-color: var(--bg-color);
            margin: 0;
            padding: 40px 20px;
            color: var(--text-dark);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .header {
            background: var(--primary);
            color: white;
            padding: 25px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 12px 12px 0 0;
        }

        .header h1 { margin: 0; font-size: 24px; font-weight: 600; }
        .step-indicator { background: rgba(255,255,255,0.2); padding: 5px 15px; border-radius: 20px; font-size: 14px; }

        form { padding: 40px; }

        .section-title {
            font-size: 18px; font-weight: 700; color: var(--text-dark);
            margin-bottom: 20px; padding-bottom: 10px;
            border-bottom: 2px solid var(--border); margin-top: 30px;
        }
        .section-title:first-of-type { margin-top: 0; }

        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .full-width { grid-column: span 2; }

        .form-group { margin-bottom: 15px; position: relative; }

        label {
            display: block; margin-bottom: 6px; font-size: 13px;
            font-weight: 600; color: var(--text-light); text-transform: uppercase;
        }

        input, select {
            width: 100%; padding: 10px 12px;
            border: 1px solid var(--border); border-radius: 6px;
            font-size: 15px; color: var(--text-dark); background: #fff;
        }

        input:focus, select:focus {
            outline: none; border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }

        /* --- Multi-Select Checkboxes Styles --- */
        .multiselect { width: 100%; position: relative; }
        .selectBox { position: relative; cursor: pointer; }
        .selectBox select { width: 100%; font-weight: bold; cursor: pointer; }
        .overSelect { position: absolute; left: 0; right: 0; top: 0; bottom: 0; }

        #checkboxes {
            display: none;
            border: 1px solid var(--border);
            border-top: none;
            border-radius: 0 0 6px 6px;
            max-height: 200px;
            overflow-y: auto;
            position: absolute;
            width: 100%;
            z-index: 10;
            background: white;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        #checkboxes label {
            display: flex; 
            align-items: center;
            padding: 8px 12px;
            margin: 0;
            font-weight: normal;
            font-size: 14px;
            color: var(--text-dark);
            cursor: pointer;
            border-bottom: 1px solid #f3f4f6;
        }

        #checkboxes label:hover { background-color: #f3f4f6; }
        #checkboxes label input { width: auto; margin-right: 10px; margin-top: 0; }
        
        /* -------------------------------------- */

        .custom-age-wrapper {
            display: none;
            margin-top: 10px;
            padding: 15px;
            background: #f9fafb;
            border: 1px dashed var(--border);
            border-radius: 6px;
        }

        .creative-table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        .creative-table th, .creative-table td { border: 1px solid var(--border); padding: 12px; text-align: left; }
        .creative-table th { background-color: #f9fafb; font-size: 13px; color: var(--text-light); }

        .form-footer { margin-top: 40px; display: flex; justify-content: flex-end; }
        .next-btn {
            background-color: var(--primary); color: white; border: none;
            padding: 12px 30px; border-radius: 6px; font-size: 16px; font-weight: 600;
            cursor: pointer; transition: background 0.2s;
        }
        .next-btn:hover { background-color: var(--primary-hover); }

        @media (max-width: 768px) {
            .form-grid { grid-template-columns: 1fr; }
            .full-width { grid-column: span 1; }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>Campaign Request Form</h1>
        <div class="step-indicator">Page 1 of 2</div>
    </div>

    <form id="page1Form" action="#" method="POST">
        
        <div class="section-title">General Information</div>
        <div class="form-grid">
            <div class="form-group">
                <label>Name of the Survey</label>
                <input type="text" value="Aspirations Survey" required>
            </div>
            <div class="form-group">
                <label>Survey Start Date</label>
                <input type="date" value="2026-01-06" required>
            </div>
            
            <div class="form-group">
                <label>Approval By</label>
                <select name="approval_by" required>
                    <option value="" disabled>Select Approver</option>
                    <option value="Ishan Sharma" selected>Ishan Sharma</option>
                    <option value="Manager B">Manager B</option>
                    <option value="Manager C">Manager C</option>
                </select>
            </div>

            <div class="form-group">
                <label>POC Name</label>
                <input type="text" value="Prasanth Katuru" required>
            </div>
            <div class="form-group">
                <label>POC Email</label>
                <input type="email" value="sai.prasanth@themindshare.in" required>
            </div>
            <div class="form-group">
                <label>Overall Budget</label>
                <input type="number" placeholder="Enter Amount" required>
            </div>
        </div>

        <div class="section-title">Location Targeting</div>
        <div class="form-grid">
            <div class="full-width">
                <small style="color: #ef4444; font-weight: bold;">* Fill Only 1: Either Location OR Pincodes</small>
            </div>
            
            <div class="form-group">
                <label>Number of Target Locations</label>
                <input type="number" value="1" required>
            </div>
            
            <div class="form-group">
                <label>Name of Location(s)</label>
                <input type="text" id="locName" value="Hyderabad, Khammam" placeholder="e.g. Hyderabad, Khammam, Warangal">
                <small style="color:#666; font-size:11px;">Separate multiple locations with commas</small>
            </div>

            <div class="form-group full-width">
                <label>Pincodes (If not City/State)</label>
                <input type="text" id="locPin" placeholder="e.g. 500081, 500032">
            </div>
        </div>

        <div class="section-title">Demographics</div>
        <div class="form-grid">
            
            <div class="form-group full-width">
                <label>Specific Age Targeting?</label>
                <select id="ageTargetSelect" onchange="toggleAgeInput()">
                    <option value="No" selected>No (General 18-65+)</option>
                    <option value="Yes">Yes</option>
                </select>

                <div id="customAgeInput" class="custom-age-wrapper">
                    <label style="color: #4F46E5;">Enter Custom Age Ranges</label>
                    <input type="text" id="customAgeText" placeholder="e.g. 18-24, 35-60">
                    <small style="color: #666; display:block; margin-top:5px;">Separate multiple ranges with commas.</small>
                </div>
            </div>

            <div class="form-group">
                <label>Gender Targeting</label>
                <select>
                    <option value="All">All Genders</option>
                    <option value="Male">Male Only</option>
                    <option value="Female">Female Only</option>
                </select>
            </div>

            <div class="form-group">
                <label>Targeting Language (Max 3)</label>
                <div class="multiselect">
                    <div class="selectBox" onclick="showCheckboxes()">
                        <select>
                            <option id="languageDisplayText">Select Languages</option> 
                        </select>
                        <div class="overSelect"></div>
                    </div>
                    <div id="checkboxes">
                        <label for="telugu">
                            <input type="checkbox" id="telugu" onchange="updateLanguageDisplay(this)" /> Telugu
                        </label>
                        <label for="hindi">
                            <input type="checkbox" id="hindi" onchange="updateLanguageDisplay(this)" /> Hindi
                        </label>
                        <label for="tamil">
                            <input type="checkbox" id="tamil" onchange="updateLanguageDisplay(this)" /> Tamil
                        </label>
                        <label for="english">
                            <input type="checkbox" id="english" onchange="updateLanguageDisplay(this)" /> English
                        </label>
                        <label for="kannada">
                            <input type="checkbox" id="kannada" onchange="updateLanguageDisplay(this)" /> Kannada
                        </label>
                        <label for="malayalam">
                            <input type="checkbox" id="malayalam" onchange="updateLanguageDisplay(this)" /> Malayalam
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <div class="section-title">Creative Links</div>
        <div class="full-width">
            <table class="creative-table">
                <thead>
                    <tr>
                        <th style="width: 50px;">S.No</th>
                        <th>Creative Link Name</th>
                        <th>Image URL</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td><input type="text" value="C1" required></td>
                        <td><input type="text" placeholder="Paste URL here" required></td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td><input type="text" value="C2" required></td>
                        <td><input type="text" placeholder="Paste URL here" required></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="form-footer">
            <button type="button" class="next-btn" onclick="goToPage2()">Next Page &rarr;</button>
        </div>

    </form>
</div>

<script>
    // 1. Toggle Age Input
    function toggleAgeInput() {
        var selectBox = document.getElementById("ageTargetSelect");
        var customInput = document.getElementById("customAgeInput");
        var customTextField = document.getElementById("customAgeText");
        
        if (selectBox.value === "Yes") {
            customInput.style.display = "block";
            customTextField.required = true;
        } else {
            customInput.style.display = "none";
            customTextField.required = false;
        }
    }

    // 2. Checkboxes Logic
    var expanded = false;
    function showCheckboxes() {
        var checkboxes = document.getElementById("checkboxes");
        if (!expanded) {
            checkboxes.style.display = "block";
            expanded = true;
        } else {
            checkboxes.style.display = "none";
            expanded = false;
        }
    }

    function updateLanguageDisplay(checkboxElement) {
        var checkboxes = document.querySelectorAll('#checkboxes input[type="checkbox"]');
        var selectedLanguages = [];
        var count = 0;
        
        checkboxes.forEach((cb) => { if (cb.checked) count++; });

        if (count > 3) {
            alert("You can select a maximum of 3 languages.");
            checkboxElement.checked = false; 
            return;
        }

        checkboxes.forEach((cb) => {
            if (cb.checked) selectedLanguages.push(cb.parentNode.textContent.trim());
        });

        var displayOption = document.getElementById("languageDisplayText");
        displayOption.textContent = selectedLanguages.length > 0 ? selectedLanguages.join(', ') : "Select Languages";
    }
    
    document.addEventListener('click', function(event) {
        var multiselect = document.querySelector('.multiselect');
        var checkboxes = document.getElementById("checkboxes");
        if (expanded && !multiselect.contains(event.target)) {
            checkboxes.style.display = "none";
            expanded = false;
        }
    });

    // 3. SAVE DATA & NAVIGATION
    function goToPage2() {
        var form = document.getElementById("page1Form");
        if (!form.checkValidity()) {
            form.reportValidity();
            return;
        }

        var locName = document.getElementById("locName").value.trim();
        var locPin = document.getElementById("locPin").value.trim();

        if (locName === "" && locPin === "") {
            alert("Please fill either 'Name of Location' OR 'Pincodes'.");
            return;
        }

        // Gather Languages
        var checkboxes = document.querySelectorAll('#checkboxes input[type="checkbox"]');
        var selectedLanguages = [];
        checkboxes.forEach((cb) => {
            if (cb.checked) selectedLanguages.push(cb.parentNode.textContent.trim());
        });

        if (selectedLanguages.length === 0) {
            alert("Please select at least one Target Language.");
            return;
        }

        // --- NEW: GATHER ALL GENERAL INFO ---
        var generalData = {
            surveyName: document.querySelector('input[value="Aspirations Survey"]').value, // Getting by value as explicit IDs weren't set on all inputs, ideally add IDs
            startDate: document.querySelector('input[type="date"]').value,
            approvalBy: document.querySelector('select[name="approval_by"]').value,
            pocName: document.querySelector('input[value="Prasanth Katuru"]').value,
            pocEmail: document.querySelector('input[type="email"]').value,
            budget: document.querySelector('input[placeholder="Enter Amount"]').value,
            locations: locName || locPin,
            languages: selectedLanguages
        };

        // Save entire object to LocalStorage
        localStorage.setItem('surveyData', JSON.stringify(generalData));
        
        // Go to next page
        window.location.href = 'page2.html';
    }
</script>

</body>
</html>